/*
 * angular-downloadsvg-directive 0.0.12
 * (c) 2014 Hypercubed <hypercubed@gmail.com>
 * Licensed MIT
 */
!function(){function a(a,b,c){var d=a.clone(!1),e=a.find("*");return d.find("*").each(function(a,d){var f=$(e.get(a));$(d).copyCSS(f,b,c)}),d}var b=["fill","stroke","stroke-width"],c=angular.module("hc.downloader",[]);c.factory("svgDownload",["$log",function(c){return function(d){var e=angular.element(d);if("svg"!==e.prop("tagName")&&(e=e.find("svg")),e.length<1)return c.warn("svgDownload Error: Element "+d+" not found"),null;e=a(e,b),e.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg");var f=e[0].outerHTML||(new XMLSerializer).serializeToString(e[0]),g=new Blob([f],{type:"text/xml"});return{getHtml:function(){return f},getBlob:function(){return g},asSvg:function(a){saveAs(g,a)}}}}]),c.directive("svgDownload",["svgDownload",function(a){return{restrict:"A",link:function(b,c,d){function e(){var b=encodeURI(d.filename||d.title||"untitled")+".svg",c=a(d.svgDownload||"body");c&&c.asSvg(b)}c.on("click",function(){b.$apply(function(){e()})})}}}])}();