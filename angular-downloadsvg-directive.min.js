/*
 * angular-downloadsvg-directive 0.0.18
 * (c) 2015 Hypercubed <hypercubed@gmail.com>
 * Licensed MIT
 */
!function(){"use strict";function a(a,b){var c={};angular.forEach(d,function(a,d){var e=b.css(d),f=b.parent().css(d);e&&e!==a&&e!==f&&(c[d]=e)}),a.css(c)}function b(a){var b=[];return $(a).each(function(){$.each(this.attributes,function(){this.specified&&(d[this.name]||e.indexOf(this.name)<0)&&b.push(this.name)})}),b.join(" ")}function c(c){var d=c.clone(!1),e=c.find("*");return d.find("*").each(function(c){var d=$(e.get(c)),f=$(this);a(f,d),f.removeAttr(b(this))}),d.removeAttr(b(d)),d}var d={"alignment-baseline":"auto","baseline-shift":"baseline",clip:"auto","clip-path":"none","clip-rule":"nonzero",color:"rgb(51, 51, 51)","color-interpolation":"srgb","color-interpolation-filters":"linearrgb","color-profile":"auto","color-rendering":"auto",cursor:"auto",direction:"ltr",display:"inline","dominant-baseline":"auto","enable-background":"",fill:"rgb(0, 0, 0)","fill-opacity":"1","fill-rule":"nonzero",filter:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"","font-family":"normal","font-size":"medium","font-size-adjust":"auto","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"400","glyph-orientation-horizontal":"0deg","glyph-orientation-vertical":"auto","image-rendering":"auto",kerning:"auto","letter-spacing":"0","lighting-color":"rgb(255, 255, 255)",marker:"","marker-end":"none","marker-mid":"none","marker-start":"none",mask:"none",opacity:"1",overflow:"visible","pointer-events":"auto","shape-rendering":"auto","stop-color":"rgb(0, 0, 0)","stop-opacity":"1",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-anchor":"start","text-decoration":"none","text-rendering":"auto","unicode-bidi":"normal",visibility:"visible","word-spacing":"0px","writing-mode":"lr-tb"},e=["id","xml:base","xml:lang","xml:space","height","result","width","x","y","xlink:href","style","class","d","pathLength","x","y","dx","dy","glyphRef","format","x1","y1","x2","y2","rotate","textLength","cx","cy","r","rx","ry","fx","fy","width","height","refx","refy","orient","markerUnits","markerWidth","markerHeight","maskUnits","transform","viewBox","version","preserveAspectRatio","xmlns"];angular.module("hc.downloader",[]).factory("svgDownload",["$log","$window",function(a,b){function e(){var c=!0;return void 0===b.saveAs&&(a.warn("svgDownload Error: FileSaver not loaded.  See installation instructions."),c=!1),void 0===b.Blob&&(a.warn("svgDownload Error: W3C Blob interface not available.  Try adding https://github.com/eligrey/Blob.js."),c=!1),c}return e(),function(f){if(e()){var g=angular.element(f);if("svg"!==g.prop("tagName")&&(g=g.find("svg")),g.length<1)return a.warn("svgDownload Error: Element "+f+" not found"),null;g=c(g,d),g.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg");var h=g[0].outerHTML||(new b.XMLSerializer).serializeToString(g[0]),i=new b.Blob([h],{type:"text/xml"});return{getHtml:function(){return h},getBlob:function(){return i},asSvg:function(a){b.saveAs(i,a)}}}}}]).directive("svgDownload",["svgDownload",function(a){return{restrict:"A",link:function(b,c,d){function e(){var b=encodeURI(d.filename||d.title||"untitled")+".svg",c=a(d.svgDownload||"body");c&&c.asSvg(b)}c.on("click",function(){e()})}}}])}();