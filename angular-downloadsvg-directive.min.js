/*
 * angular-downloadsvg-directive 0.0.12
 * (c) 2014 Hypercubed <hypercubed@gmail.com>
 * Licensed MIT
 */
!function(){"use strict";angular.module("hc.downloader",[]).factory("svgDownload",["$log","$window",function(a,b){function c(b,c,d){var e=b.clone(!1);if(void 0===$.fn.copyCSS)a.warn("svgDownload Error: copyCSS is not available. Computed styles will not be copied.");else{var f=b.find("*");e.find("*").each(function(a,b){var e=$(f.get(a));$(b).copyCSS(e,c,d)})}return e}function d(){var c=!0;return void 0===b.saveAs&&(a.warn("svgDownload Error: FileSaver not loaded.  See installation instructions."),c=!1),void 0===b.Blob&&(a.warn("svgDownload Error: W3C Blob interface not available.  Try adding https://github.com/eligrey/Blob.js."),c=!1),c}var e=["alignment-baseline","baseline-shift","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","display","dominant-baseline","enable-background","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","lighting-color","marker","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","unicode-bidi","visibility","word-spacing","writing-mode"];return d(),function(f){if(d()){var g=angular.element(f);if("svg"!==g.prop("tagName")&&(g=g.find("svg")),g.length<1)return a.warn("svgDownload Error: Element "+f+" not found"),null;g=c(g,e),g.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg");var h=g[0].outerHTML||(new b.XMLSerializer).serializeToString(g[0]),i=new b.Blob([h],{type:"text/xml"});return{getHtml:function(){return h},getBlob:function(){return i},asSvg:function(a){b.saveAs(i,a)}}}}}]).directive("svgDownload",["svgDownload",function(a){return{restrict:"A",link:function(b,c,d){function e(){var b=encodeURI(d.filename||d.title||"untitled")+".svg",c=a(d.svgDownload||"body");c&&c.asSvg(b)}c.on("click",function(){e()})}}}])}();